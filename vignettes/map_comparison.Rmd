---
title: "The Accuracy of Human Population Density Maps : Detailed Methods"
author: "David L Smith, Carlos Guerra, Andrew Dolgert, Brendan Fries"
date: "9/18/2019"
output:
  pdf_document: default
  html_document: default
---

# Overview

This notebook calculates metrics from a population density map
by comparing them with a gold standard map.

# Maps

The maps were made by the "get-data" vignette. We load them all
at once here for convenience. The naming scheme is dataset-on-grid,
where grids are 100m or 1km, according to where they come from.

```{r load_maps}
project_root <- rprojroot::find_root(rprojroot::is_rstudio_project)
map_root <- fs::path(project_root, "inst", "extdata")

load_one <- function(name) {
  raster::raster(fs::path(map_root, name, ext = "tif"))
}
files <- c(
  "bimep_on_1kworldpop", "bimep_on_area", "bimep_on_landscan",
  "hrsl_on_area", "hrsl_on_hrsl", "landscan_on_landscan",
  "worldpop_on_1kworldpop", "worldpop_on_worldpop"
  )
paths <- sapply(files, function(base) fs::path(map_root, base, ext = "tif"))
for (check_exist in paths) {
  stopifnot(file.exists(check_exist))
}
maps <- lapply(paths, function(one_path) raster::raster(one_path))
names(maps) <- files
```

# Summary Statistics

The first figure is summary statistics, done at the pixel level.

```{r summary_statistics}
summary_stats <- lapply(maps, summary_statistics)
summary_df <- do.call(rbind, summary_stats)
rownames(summary_df) <- names(maps)
t(summary_df)
```

